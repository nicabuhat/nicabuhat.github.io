{"mappings":"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","sources":["src/assets/js/app.js"],"sourcesContent":["let bets = [];\r\nlet winnings = 0;\r\n\r\nclass Bubble {\r\n  constructor(bubble) {\r\n    this.id = bubble.id;\r\n    this.bet = bubble.bet;\r\n    this.secret = bubble.secret;\r\n    this.size = bubble.size;\r\n  }\r\n\r\n  createBubbleDiv() {\r\n    const sectionBubbles = document.getElementById('section-bubbles');\r\n    const betForm = document.getElementById('form-bet');\r\n    const newBubble = Object.assign(document.createElement('div'), {\r\n      className: 'bubble',\r\n      id: this.id,\r\n    });\r\n    newBubble.innerText = this.bet;\r\n    sectionBubbles.append(newBubble);\r\n    betForm.reset();\r\n  }\r\n\r\n  getSize() {\r\n    return this.size;\r\n  }\r\n\r\n  getBet() {\r\n    return this.bet;\r\n  }\r\n\r\n  getSecret() {\r\n    return this.secret;\r\n  }\r\n\r\n  setSize(size) {\r\n    this.size = size;\r\n  }\r\n\r\n  pushToBets() {\r\n    bets.push(this);\r\n  }\r\n}\r\n\r\nconst toggleBetSection = () => {\r\n  const betSection = document.getElementById('section-form');\r\n  betSection.style.display =\r\n    getComputedStyle(betSection, null).display === 'flex' ? 'none' : 'flex';\r\n};\r\n\r\nconst toggleChallengeSection = () => {\r\n  const challengeSection = document.getElementById('section-challenge');\r\n  challengeSection.style.display =\r\n    getComputedStyle(challengeSection, null).display === 'flex'\r\n      ? 'none'\r\n      : 'flex';\r\n};\r\n\r\nconst updateBubbleSize = () => {\r\n  const summation = (total, bet) => {\r\n    return total + Number(bet.bet);\r\n  };\r\n\r\n  const total = bets.reduce(summation, 0);\r\n\r\n  bets = bets.map((bet) => {\r\n    const size = `${Math.floor((bet.bet / total) * 100 + 80)}px`;\r\n    const bubble = document.getElementById(bet.id);\r\n    bubble.style.height = size;\r\n    bubble.style.width = size;\r\n    const newBubble = new Bubble(bet);\r\n    newBubble.size = size;\r\n    return newBubble;\r\n  });\r\n};\r\n\r\nconst updateBetsList = (bubble) => {\r\n  const newBets = bets.filter((b) => b.id !== bubble.id);\r\n  bets = newBets;\r\n};\r\n\r\nconst onBetFormSubmit = () => {\r\n  const form = document.getElementById('form-bet');\r\n  form.onsubmit = (e) => {\r\n    e.preventDefault();\r\n    const id = '_id' + Math.random().toString(16).slice(2);\r\n    const bet = e.target.bet.value;\r\n    const secret = e.target.secret.value;\r\n    const currentBubble = { id, bet, secret, size: '50px' };\r\n    const newBubble = new Bubble(currentBubble);\r\n    newBubble.createBubbleDiv();\r\n    newBubble.pushToBets();\r\n    updateBubbleSize();\r\n    toggleBetSection();\r\n  };\r\n};\r\n\r\nconst onSelectBetBtn = () => {\r\n  const toggleBetBtn = document.getElementById('btn-bet');\r\n  toggleBetBtn.addEventListener('click', () => {\r\n    toggleBetSection();\r\n  });\r\n};\r\n\r\nconst onPlaceBetBtn = () => {\r\n  onBetFormSubmit();\r\n};\r\n\r\nconst updateWinnings = (e, clickedBubble) => {\r\n  const bubble = bets.find((b) => b.id === clickedBubble.id);\r\n  const bet = Number(bubble.getBet());\r\n  const secret = bubble.getSecret();\r\n  const winningsText = document.getElementById('winnings');\r\n\r\n  challengeValue = e.target.innerText;\r\n  winnings += challengeValue === secret ? bet : bet * -1;\r\n  winningsText.innerText = winnings;\r\n  clickedBubble.remove();\r\n  updateBetsList(bubble);\r\n  toggleChallengeSection();\r\n};\r\n\r\nconst onChallenge = (bubble) => {\r\n  const secretZero = document.getElementById('btn-challenge-0');\r\n  const secretOne = document.getElementById('btn-challenge-1');\r\n\r\n  secretZero.addEventListener('click', (e) => {\r\n    updateWinnings(e, bubble);\r\n  });\r\n  secretOne.addEventListener('click', (e) => {\r\n    updateWinnings(e, bubble);\r\n  });\r\n};\r\n\r\nconst onClickBubble = () => {\r\n  const callback = (mutationList, observer) => {\r\n    mutationList.forEach((mutation) => {\r\n      let currentBubble = '';\r\n      const added = mutation.addedNodes;\r\n      const removed = mutation.removedNodes;\r\n\r\n      if (added.length > 0 && added[0].className === 'bubble') {\r\n        document.addEventListener('click', (e) => {\r\n          let bubble = e.target;\r\n          if (bubble.className === 'bubble') {\r\n            currentBubble = bets.filter((b) => b.id === bubble.id);\r\n            e.stopImmediatePropagation();\r\n            toggleChallengeSection();\r\n            onChallenge(bubble);\r\n            e.preventDefault();\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    observer.disconnect();\r\n  };\r\n\r\n  class customObserver {\r\n    constructor(mutations, observer) {\r\n      this.target = document.getElementById('section-bubbles');\r\n      this.config = { attributes: false, childList: true, subtree: true };\r\n      this.observer = new MutationObserver((mutations, observer) => {\r\n        callback.call(this, mutations, observer);\r\n      });\r\n    }\r\n\r\n    connect() {\r\n      this.observer.observe(this.target, this.config);\r\n    }\r\n\r\n    disconnect() {\r\n      this.observer.disconnect();\r\n    }\r\n  }\r\n\r\n  const observer = new customObserver((mutations, observer) => {\r\n    callback(mutations, observer);\r\n    observer.connect();\r\n  });\r\n\r\n  observer.connect();\r\n};\r\n\r\nconst app = () => {\r\n  onSelectBetBtn();\r\n  onPlaceBetBtn();\r\n  onClickBubble();\r\n};\r\n\r\napp();\r\n"],"names":["bets","winnings","Bubble","constructor","bubble","this","id","bet","secret","size","createBubbleDiv","sectionBubbles","document","getElementById","betForm","newBubble","Object","assign","createElement","className","innerText","append","reset","getSize","getBet","getSecret","setSize","pushToBets","push","toggleBetSection","betSection","style","display","getComputedStyle","toggleChallengeSection","challengeSection","updateBubbleSize","total1","reduce","total","Number","map","Math","floor","height","width","updateBetsList","newBets","filter","b","onBetFormSubmit","onsubmit","e","preventDefault","random","toString","slice","target","value","onSelectBetBtn","addEventListener","onPlaceBetBtn","updateWinnings","clickedBubble","find","winningsText","challengeValue","remove","onChallenge","secretZero","secretOne","onClickBubble","callback","mutationList","observer","forEach","mutation","currentBubble","added","addedNodes","removedNodes","length","stopImmediatePropagation","disconnect","mutations1","observer2","config","attributes","childList","subtree","MutationObserver","mutations","call","connect","observe","app"],"version":3,"file":"index.f20da6ab.js.map"}